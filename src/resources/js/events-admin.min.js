var tribe_timepickers=tribe_timepickers||{};!function(e,t){"use strict";t.selector={container:".tribe-datetime-block",timepicker:".tribe-timepicker",all_day:"#allDayCheckbox",timezone:".tribe-field-timezone",input:"select, input"},t.timepicker={opts:{forceRoundTime:!1,step:30}},t.timezone={link:_.template('<a href="#" class="tribe-change-timezone"><%= label %> <%= timezone %></a>')},t.$={},t.container=function(n,i){var a=e(i),r=a.find(t.selector.all_day),d=a.find(t.selector.timepicker),o=a.find(t.selector.timezone).not(t.selector.input),s=a.find(t.selector.timezone).filter(t.selector.input),l=e(t.timezone.link({label:s.data("timezoneLabel"),timezone:s.data("timezoneValue")}));r.on("change",function(){!0===r.prop("checked")?d.hide():d.show()}).trigger("change"),t.setup_timepickers(d),l.on("click",function(e){o=a.find(t.selector.timezone).filter(".select2-container"),e.preventDefault(),l.hide(),o.show()}),o.after(l)},t.init=function(){t.$.containers=e(t.selector.container),t.$.containers.each(t.container)},t.setup_timepickers=function(n){n.each(function(){var n=e(this),i=e.extend({},t.timepicker.opts);n.data("format")&&(i.timeFormat=n.data("format")),n.data("step")&&(i.step=n.data("step"));var a=n.data("round");a&&0!=a&&"false"!==a&&(i.forceRoundTime=!0),"undefined"!=typeof e.fn.tribeTimepicker?n.tribeTimepicker(i).trigger("change"):n.timepicker(i).trigger("change")})},e(document).ready(t.init)}(jQuery,tribe_timepickers);var tribeDateFormat=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,i=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e};return function(a,r,d){var o=tribeDateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(a)||/\d/.test(a)||(r=a,a=void 0),"string"==typeof a&&(a=a.replace(/-/g,"/")),a=a?new Date(a):new Date,!isNaN(a)){r=String(o.masks[r]||r||o.masks["default"]),"UTC:"==r.slice(0,4)&&(r=r.slice(4),d=!0);var s=d?"getUTC":"get",l=a[s+"Date"](),c=a[s+"Day"](),m=a[s+"Month"](),y=a[s+"FullYear"](),p=a[s+"Hours"](),u=a[s+"Minutes"](),f=a[s+"Seconds"](),v=a[s+"Milliseconds"](),h=d?0:a.getTimezoneOffset(),b={d:l,dd:i(l),ddd:o.i18n.dayNames[c],dddd:o.i18n.dayNames[c+7],m:m+1,mm:i(m+1),mmm:o.i18n.monthNames[m],mmmm:o.i18n.monthNames[m+12],yy:String(y).slice(2),yyyy:y,h:p%12||12,hh:i(p%12||12),H:p,HH:i(p),M:u,MM:i(u),s:f,ss:i(f),l:i(v,3),L:i(v>99?Math.round(v/10):v),t:p<12?"a":"p",tt:p<12?"am":"pm",T:p<12?"A":"P",TT:p<12?"AM":"PM",Z:d?"UTC":(String(a).match(t)||[""]).pop().replace(n,""),o:(h>0?"-":"+")+i(100*Math.floor(Math.abs(h)/60)+Math.abs(h)%60,4),S:["th","st","nd","rd"][l%10>3?0:(l%100-l%10!=10)*l%10]};return r.replace(e,function(e){return e in b?b[e]:e.slice(1,e.length-1)})}}}();tribeDateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",tribeQuery:"yyyy-mm-dd",tribeMonthQuery:"yyyy-mm",0:"yyyy-mm-dd",1:"m/d/yyyy",2:"mm/dd/yyyy",3:"d/m/yyyy",4:"dd/mm/yyyy",5:"m-d-yyyy",6:"mm-dd-yyyy",7:"d-m-yyyy",8:"dd-mm-yyyy",9:"yyyy.mm.dd",10:"mm.dd.yyyy",11:"dd.mm.yyyy",m0:"yyyy-mm",m1:"m/yyyy",m2:"mm/yyyy",m3:"m/yyyy",m4:"mm/yyyy",m5:"m-yyyy",m6:"mm-yyyy",m7:"m-yyyy",m8:"mm-yyyy"},tribeDateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(e,t){return tribeDateFormat(this,e,t)};var tribe_datepicker_opts={};jQuery(document).ready(function(e){function t(){var t=e(window).width();return t<800?1:t<=1100?2:3}function n(e,t){var n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),i=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((i-n)/p)}function i(){x.find("option").each(function(){var t=e(this);O[t.attr("value")]=t.text()}),B.find("option").each(function(){var t=e(this);O[t.attr("value")]=t.text()})}function a(t){var n=x.find("option:selected").first().val(),i=B.find("option:selected").first().val();x.find("option").remove(),B.find("option").remove(),z.each(function(){var t=e(this);if(t.is(":checked")){var n=t.val();x.append('<option value="'+n+'">'+O[n]+"</option>"),B.append('<option value="'+n+'">'+O[n]+"</option>")}});var a=x.find("option[value='"+n+"']"),r=B.find("option[value='"+i+"']");if(a.val()==t.val())a.attr("selected","selected");else{var d=F.find("checkbox:checked").first().val();x.find("option").find("option[value='"+d+"']").attr("selected","selected")}if(r.val()==t.val())r.attr("selected","selected");else{var d=F.find("checkbox:checked").first().val();B.find("option").find("option[value='"+d+"']").attr("selected","selected")}x.select2("destroy").select2({width:"auto"}),B.select2("destroy").select2({width:"auto"})}e(".bumpdown-trigger").bumpdown();var r=e("[data-datepicker_format]"),d=(e(".tribe-field-dropdown_select2 select"),e(document.getElementById("view-calendar-link-div")).html()),o=(e('select[name="tribeEventsTemplate"]'),e(document.getElementById("tribe-event-datepickers"))),s=e("body").is(".tribe_community_edit"),l=0,c={main:["yy-mm-dd","m/d/yy","mm/dd/yy","d/m/yy","dd/mm/yy","m-d-yy","mm-dd-yy","d-m-yy","dd-mm-yy","yy.mm.dd","mm.dd.yy","dd.mm.yy"],month:["yy-mm","m/yy","mm/yy","m/yy","mm/yy","m-yy","mm-yy","m-yy","mm-yy"]};e('[data-wp-lists="list:tribe_events_cat"]').each(function(){var t=e(this),n=t.find(":checkbox:checked").first();if(n.length){var i=t.find(":checkbox").position().top,a=n.position().top;t.closest(".tabs-panel").scrollTop(a-i+5)}}),e(d).insertAfter(".edit-php.post-type-tribe_events #wpbody-content .wrap h2:eq(0) a");var m=function(t){function n(t,n,i){if("undefined"!=typeof window["tribe_sticky_"+t+"_fields"]&&e.isArray(window["tribe_sticky_"+t+"_fields"])){var a=e(i),r=a.filter("tr.linked-post."+n);if(0!==r.length){var d=window["tribe_sticky_"+t+"_fields"].shift(),o=!1;if("object"==typeof d)for(var s in d){var l=a.find('input[name="'+n+"["+s+'][]"]');l.length&&!_.isEmpty(d[s])&&(l.val(d[s]),o=!0)}o&&r.show()}}}var i=e(document.getElementById("tmpl-tribe-select-"+t)).length?wp.template("tribe-select-"+t):null,a=e(document.getElementById("tmpl-tribe-create-"+t)).length?wp.template("tribe-create-"+t):null,r=e(document.getElementById("event_"+t)),d=r.find(".saved-linked-post");r.on("click",".tribe-add-post",function(n){n.preventDefault();var d=e({}),o=e({});if(i&&(d=e(i({}))),d.find(".nosaved").length){var s=d.find("label");s.text(s.data("l10n-create-"+t)),d.find(".nosaved").remove()}a&&(o=e(a({}))),r.find("tfoot").before(o),o.prepend(d),r.find("tbody").length>1?r.find(".move-linked-post-group").show():r.find(".move-linked-post-group").hide(),o.find(".tribe-dropdown").tribe_dropdowns().trigger("change")}),r.on("change",".linked-post-dropdown",y),d.each(function(){var t,i=e(this),r=i.closest("tbody");t=a?e(a({})).find("tr"):r.find("tr").slice(2);var d=i.find(".linked-post-dropdown");if(d.length){var o=d.val();0!==parseInt(o,10)&&t.not(".remain-visible").hide()}else if(i.find(".nosaved").length){var s=i.find("label");s.text(s.data("l10n-create-"+l)),i.find(".nosaved").remove()}for(var l in tribe_events_linked_posts.post_types)tribe_events_linked_posts.post_types.hasOwnProperty(l)&&n(l,tribe_events_linked_posts.post_types[l],t);t.find(".tribe-dropdown").tribe_dropdowns().trigger("change"),r.append(t)}),r.on("click",".tribe-delete-this",function(t){t.preventDefault();var n=e(this).closest("tbody");n.fadeOut(500,function(){e(this).remove()})});var o="> tbody";e("body").hasClass("wp-admin")||(o="table "+o),r.sortable({items:o,handle:".move-linked-post-group",containment:"parent",axis:"y",delay:100}),r.find("tbody").length>1?r.find(".move-linked-post-group").show():r.find(".move-linked-post-group").hide()},y=function(t){var n=e(this),i=n.closest("tbody"),a=i.find(".edit-linked-post-link a"),r=a.attr("data-admin-url"),d="undefined"==typeof t.added?{}:t.added;_.isEmpty(d)&&a.hide(),"undefined"!=typeof d["new"]&&d["new"]?(i.find(".linked-post-name").val(d.id).parents(".linked-post").eq(0).attr("data-hidden",!0),n.val(""),i.find(".linked-post").not("[data-hidden]").show().find(".tribe-dropdown").trigger("change")):(i.find(".linked-post").hide().find("input").val(""),_.isEmpty(d)||a.attr("href",r+d.id).show())};if(e(".hide-if-js").hide(),"undefined"!=typeof tribe_l10n_datatables.datepicker){var p=864e5,u="yy-mm-dd";r.length&&r.attr("data-datepicker_format").length>=1&&(l=r.attr("data-datepicker_format"),u=c.main[l]);var f=0;o.length&&(f=o.data("startofweek"));var v=e(document.getElementById("EventStartDate")),h=e(document.getElementById("EventEndDate")),b=e(document.getElementById("tribe_events_event_details"));tribe_datepicker_opts={dateFormat:u,showAnim:"fadeIn",changeMonth:!0,changeYear:!0,numberOfMonths:t(),firstDay:f,showButtonPanel:!1,beforeShow:function(n,i){i.input.datepicker("option","numberOfMonths",t()),i.input.data("prevDate",i.input.datepicker("getDate")),$dpDiv=e(i.dpDiv),$dpDiv.addClass("tribe-ui-datepicker"),b.trigger("tribe.ui-datepicker-div-beforeshow",[i]),$dpDiv.attrchange({trackValues:!0,callback:function(e){(e.newValue.indexOf("display: none")>=0||e.newValue.indexOf("display:none")>=0)&&($dpDiv.removeClass("tribe-ui-datepicker"),b.trigger("tribe.ui-datepicker-div-closed",[i]))}})},onSelect:function(t,i){var a=e(this).data("datepicker"),r=e.datepicker.parseDate(a.settings.dateFormat||e.datepicker._defaults.dateFormat,t,a.settings);if("EventStartDate"===this.id){var d=e(document.getElementById("EventStartDate")).data("prevDate"),o=null==d?0:n(d,h.datepicker("getDate")),s=new Date(r.setDate(r.getDate()+o));h.datepicker("option","minDate",s).datepicker("setDate",s).datepicker_format}else"EventEndDate"===this.id&&v.datepicker("option","maxDate",r);e(this).change(),e(this).blur()}},e.extend(tribe_datepicker_opts,tribe_l10n_datatables.datepicker);var g,k=(e(".tribe-datepicker").datepicker(tribe_datepicker_opts),e('select[name="EventStartMonth"], select[name="EventEndMonth"]')),w=e('select[name="EventStartMonth"]'),D=e('select[name="EventEndMonth"]');if(s){var E={start:o.find("#EventStartDate"),end:o.next("tr").find("#EventEndDate")};e.each(E,function(t,n){var i=e(n);""!==i.val()&&i.val(tribeDateFormat(i.val(),l))})}var S=[29,31,28,31,30,31,30,31,31,30,31,30,31],M=[e(document.getElementById("28StartDays")),e(document.getElementById("29StartDays")),e(document.getElementById("30StartDays")),e(document.getElementById("31StartDays"))],C=[e(document.getElementById("28EndDays")),e(document.getElementById("29EndDays")),e(document.getElementById("30EndDays")),e(document.getElementById("31EndDays"))];k.change(function(){var t=e(this),n=t.attr("name");n="EventStartMonth"==n?"Start":"End";var i=t.attr("value");"0"==i.charAt(0)&&(i=i.replace("0",""));var a=e('select[name="Event'+n+'Year"]').attr("value")%4;2==i&&0==a&&(i=0);var r=e('select[name="Event'+n+'Day"]');e(".event"+n+"DateField").remove(),"Start"==n?(g=M[S[i]-28],g.val(r.val()),w.after(g)):(g=C[S[i]-28],g.val(r.val()),D.after(g))}),k.change(),e('select[name="EventStartYear"]').change(function(){w.change()}),e('select[name="EventEndYear"]').change(function(){D.change()});for(var T in tribe_events_linked_posts.post_types)tribe_events_linked_posts.post_types.hasOwnProperty(T)&&m(T)}e("body").on("change","#EventCountry",function(){var t=e(this),n=t.parents("div.eventForm").eq(0),i=n.find("#s2id_StateProvinceSelect"),a=n.find("#StateProvinceSelect"),r=n.find("#StateProvinceText"),d=e(this).val();"US"==d||"United States"==d?(r.hide(),a.hide(),i.show()):(r.show(),a.hide(),i.hide())}).find("#EventCountry").trigger("change");var $={$container:e(document.getElementById("overwrite_coordinates"))};$.$lat=$.$container.find("#VenueLatitude"),$.$lng=$.$container.find("#VenueLongitude"),$.$fields=e("").add($.$lat).add($.$lng),$.$toggle=$.$container.find("#VenueOverwriteCoords").on("change",function(e){$.$toggle.is(":checked")?$.$fields.prop("disabled",!1).removeClass("hidden"):$.$fields.prop("disabled",!0).addClass("hidden")}),$.$toggle.trigger("change"),e("#EventInfo input, #EventInfo select").change(function(){e(".rec-error").hide()});var I=e('.wp-admin.events-cal #post #publishing-action input[type="submit"]');I.click(function(){e(this).data("clicked",!0)}),e("body").hasClass("post-type-tribe_venue")&&e("#menu-posts-tribe_events, #menu-posts-tribe_events a.wp-has-submenu").addClass("wp-menu-open wp-has-current-submenu wp-has-submenu").removeClass("wp-not-current-submenu").find("li a[href='edit.php?post_type=tribe_venue']").parent().addClass("current"),e("body").hasClass("post-type-tribe_organizer")&&e("#menu-posts-tribe_events, #menu-posts-tribe_events a.wp-has-submenu").addClass("wp-menu-open wp-has-current-submenu wp-has-submenu").removeClass("wp-not-current-submenu").find("li a[href='edit.php?post_type=tribe_organizer']").parent().addClass("current");var F=e(document.getElementById("tribe-field-tribeEnableViews"));if(F.length){var x=e('select[name="viewOption"]'),B=e('select[name="mobile_default_view"]'),z=F.find("input:checkbox"),A=e("#tribe-field-tribeEnableViews .tribe-field-wrap p.description"),O={};i(),F.on("change","input:checkbox",function(){var t=e(this);e('[name="tribeEnableViews[]"]:checked').length<1?(t.attr("checked",!0),A.css("color","red")):A.removeAttr("style"),a(t)})}e("#tribe-community-events.form form").on("submit",function(){var t={start:o.find("#EventStartDate"),end:o.next("tr").find("#EventEndDate")};t.start.val(tribeDateFormat(t.start.datepicker("getDate"),"tribeQuery")),t.end.val(tribeDateFormat(t.end.datepicker("getDate"),"tribeQuery")),o.parent().find(".tribe-no-end-date-update").each(function(){$el=e(this),$el.is(":visible")&&$el.val(tribeDateFormat($el.datepicker("getDate"),"tribeQuery"))})})});